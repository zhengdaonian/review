### WebSocket

- 双向通信：适合实时双向数据传输
- 低延迟：基于 TCP 协议，延迟低
- 复杂场景：适合聊天、实时游戏等复杂场景

### websocket 通信机制

### 说一下你对 webScoket 的了解，以及有哪些 API

### webscoket 的连接原理

websocket 的好处，怎么建立连接，心跳机制怎么做，错误怎么处理

websocket 和 轮询的区别

WebSocket 是一种网络通信协议，它提供了一个持久的、全双工的通信通道，允许客户端和服务器之间进行双向数据通信。
WebSocket 的主要特点包括：
持久连接：一旦建立，连接保持开放，直到任一方主动关闭连接。
全双工通信：客户端和服务器都可以随时发送数据给对方。 低延迟：相比传统的轮询机制，WebSocket 提供了更快的响应时间。
高效数据传输：使用二进制格式传输数据，减少数据包的大小。 安全性：可以通过 TLS/SSL 加密（WSS）确保数据传输的安全。
WebSocket 在现代浏览器中得到了广泛的支持，适用于各种实时通信应用，如在线聊天、实时游戏、协作编辑工具等。

webSocket 断开之后怎么办
断网重连, 自动心跳

监听连接状态：首先，您需要监听 WebSocket 的 onclose 事件来检测连接何时关闭。这可以帮助您了解是否由于网络问题导致了连接中断。

设置重连尝试逻辑：

在检测到连接关闭后，可以立即尝试重新连接，或者等待一段时间后再尝试。
使用指数退避算法（例如首次等待 2 秒，然后 4 秒、8 秒等）增加每次重试前的等待时间，以避免对服务器造成过大压力。
设置最大重试次数限制，防止在无法恢复的情况下无限重试。

成功重连后的处理：一旦成功重连，可能需要重新发送在断开期间未能成功发送的消息，或者同步客户端与服务器之间的状态。

目的：心跳机制的主要目的是保持客户端和服务器之间的连接活跃，避免由于长时间没有数据传输而导致的连接被中间设备（如防火墙或代理服务器）自动断开。

实现方法：

客户端定期向服务器发送“ping”消息，服务器接收到后回复一个“pong”响应。
如果客户端在设定的时间间隔内没有收到“pong”响应，则认为连接已失效，并触发重连逻辑。
同样，服务器也可以主动发送“ping”，客户端回应“pong”来确保双向通信的有效性。

注意事项：

选择合适的心跳间隔非常重要。如果间隔太短，会增加不必要的网络流量；如果间隔太长，则可能不足以维持连接的活跃状态。
确保心跳消息尽可能简单，以减少带宽消耗和服务器负载。
