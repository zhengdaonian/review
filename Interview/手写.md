### æ‰‹å†™ promise

é‡ç‚¹æ˜¯éœ€è¦å®ç° Promise.then æ–¹æ³•
ç»´æŠ¤ä¸€ä¸ª fullfilled çš„äº‹ä»¶é˜Ÿåˆ—å’Œä¸€ä¸ª rejected äº‹ä»¶é˜Ÿåˆ—
åœ¨ Promise.then æ–¹æ³•é‡Œéœ€è¦åˆ¤æ–­ä¸€ä¸‹å½“å‰ Promise çš„çŠ¶æ€ä»¥åŠå‚æ•°ç±»å‹
æœ€åéœ€è¦å®ç°ä¸¤ä¸ªäº‹ä»¶é˜Ÿåˆ—çš„è‡ªæ‰§è¡Œï¼Œç”¨æ¥å¤„ç†é“¾å¼è°ƒç”¨çš„æƒ…å†µ
åœ¨æ‰§è¡Œæ–¹æ³•æ—¶ä½¿ç”¨ setTimeout æ¨¡æ‹Ÿå¼‚æ­¥ä»»åŠ¡

### å®ç°ä¸€ä¸ªèŠ‚æµå‡½æ•°? å¦‚æœæƒ³è¦æœ€åä¸€æ¬¡å¿…é¡»æ‰§è¡Œçš„è¯æ€ä¹ˆå®ç°?

### æ‰‹å†™ promise

### æ‰‹å†™ bind

### æ‰‹å†™ eventEmitter

è·Ÿ promise class ä¸€æ ·ï¼Œå…ˆæ­å»ºä¸€ä¸ªæ¡†æ¶ï¼š
class EventEmitter {
constructor() {
this.events = {}
}
emit (eventName, args) {}
on (eventName, callback) {}
off (eventName, callback?) {}
}
å¤åˆ¶ä»£ç ä¹‹å‰æœ‰å†™è¿‡äº‹ä»¶ç³»ç»Ÿï¼Œä½†æ˜¯æ²¡æœ‰è€ƒè™‘ once ä¹‹ç±»çš„ methodï¼Œä¹Ÿæ˜¯é¢è¯•å®˜è¯´äº†éœ€æ±‚å†ä¸€ç‚¹ç‚¹è¡¥å……çš„ã€‚

### æ‰‹å†™ Proxy / Object.defineProperty

å®é™…åªæ˜¯è¦æ±‚ä¸¤è€…çš„æ¯”è¾ƒä»¥åŠå¦‚ä½•è¿ç”¨

### æ‰‹å†™æ·±æ‹·è´

### ã€å®ç° instanceOf çš„ 3 ç§æ–¹æ³•

```
function myInstanceof(obj, func) {
	if(!['function', 'object'].includes(typeof obj) || obj === null) {
		// åŸºæœ¬æ•°æ®ç±»å‹ç›´æ¥è¿”å›falseï¼Œå› ä¸ºä¸æ»¡è¶³instanceofçš„å·¦ä¾§å‚æ•°æ˜¯å¯¹è±¡æˆ–è€…è¯´å¼•ç”¨ç±»å‹
			return false
	}
	let proto = obj.__proto__, prototype = func.prototype
	while(proto !== prototype) {
		// obj.__proto__ä¸ç­‰äºfunc.prototypeæ—¶ï¼Œç»§ç»­é€šè¿‡__proto__å‘ä¸Šå±‚æŸ¥æ‰¾
		// å½“æ‰¾åˆ°åŸå‹é“¾å°½å¤´Object.prototype.__proto__=null æ—¶è¿˜æœªæ‰¾åˆ°ï¼Œå°±è¿”å›false
		proto = proto.__proto__
		if(proto === null){
			return false
		}
	}
// obj.__proto__ ç­‰äº prototype = func.prototype æ—¶ï¼Œä¸ä¼šè¿›å…¥ä¸Šé¢å¾ªç¯ï¼Œè¿”å›true
// ä¸ç­‰è¿›å…¥ä¸Šé¢å¾ªç¯ï¼Œæ‰¾åˆ°ç›¸ç­‰æ—¶ä¼šè·³å‡ºå¾ªç¯ï¼Œèµ°åˆ°è¿™é‡Œè¿”å›true
return true
}
```

### æ•°ç»„ä¸æ ‘ç»“æ„ç›¸äº’è½¬æ¢

```
let data = [
  { id: 0, parentId: null, name: 'ç”Ÿç‰©' },
  { id: 1, parentId: 0, name: 'åŠ¨ç‰©' },
  { id: 2, parentId: 0, name: 'æ¤ç‰©' },
  { id: 3, parentId: 0, name: 'å¾®ç”Ÿç‰©' },
  { id: 4, parentId: 1, name: 'å“ºä¹³åŠ¨ç‰©' },
  { id: 5, parentId: 1, name: 'åµç”ŸåŠ¨ç‰©' },
  { id: 6, parentId: 2, name: 'ç§å­æ¤ç‰©' },
  { id: 7, parentId: 2, name: 'è•¨ç±»æ¤ç‰©' },
  { id: 8, parentId: 4, name: 'å¤§è±¡' },
  { id: 9, parentId: 4, name: 'æµ·è±š' },
  { id: 10, parentId: 4, name: 'çŒ©çŒ©' },
  { id: 11, parentId: 5, name: 'èŸ’è›‡' },
  { id: 12, parentId: 5, name: 'éº»é›€' }
]

let node = {
    "id": 0,
    "parentId": null,
    "name": "ç”Ÿç‰©",
    "children": [{
        "id": 1,
        "parentId": 0,
        "name": "åŠ¨ç‰©",
        "children": [{
            "id": 4,
            "parentId": 1,
            "name": "å“ºä¹³åŠ¨ç‰©",
            "children": [{
                "id": 8,
                "parentId": 4,
                "name": "å¤§è±¡"
            }, {
                "id": 9,
                "parentId": 4,
                "name": "æµ·è±š"
            }, {
                "id": 10,
                "parentId": 4,
                "name": "çŒ©çŒ©"
            }]
        }, {
            "id": 5,
            "parentId": 1,
            "name": "åµç”ŸåŠ¨ç‰©",
            "children": [{
                "id": 11,
                "parentId": 5,
                "name": "èŸ’è›‡"
            }, {
                "id": 12,
                "parentId": 5,
                "name": "éº»é›€"
            }]
        }]
    }, {
        "id": 2,
        "parentId": 0,
        "name": "æ¤ç‰©",
        "children": [{
            "id": 6,
            "parentId": 2,
            "name": "ç§å­æ¤ç‰©"
        }, {
            "id": 7,
            "parentId": 2,
            "name": "è•¨ç±»æ¤ç‰©"
        }]
    }, {
        "id": 3,
        "parentId": 0,
        "name": "å¾®ç”Ÿç‰©"
    }]
}
```

```
const transTree = (data) => {
	let result = []
	let map = {}
	if(!Array.isArray(data)) { // éªŒè¯dataæ˜¯ä¸æ˜¯æ•°ç»„ç±»å‹
  	return []
  }
	data.forEach(item => {
  	map[item.id] = item //æµ…æ‹·è´ï¼Œå…±äº«å¼•ç”¨
  })
	data.forEach(item => {
  	let parent = map[item.parentId]
  	if(parent) {
    	(parent.children || (parent.children = [])).push(item)
    } else {
    	result.push(item)
    }
  })
	return result
}
```

```
const transArr = (node) => {
	let queue = [node];
	let data = []
	while (queue.length !== 0){
  	let item = queue.shift()
  	data.push({
    	id: item.id,
    	parentId: item.parentId,
    	name: item.name
    })
  	let children = item.children
  	if (children) {
    	for (let i =0; i < children.length; i ++) {
        queue.push(children[i])
      }
    }
  }
  return data
}
```

### å»é™¤å­—ç¬¦ä¸²ä¸­å‡ºç°æ¬¡æ•°æœ€å°‘çš„å­—ç¬¦ï¼Œä¸æ”¹å˜åŸå­—ç¬¦ä¸²çš„é¡ºåºã€‚

### å†™å‡ºä¸€ä¸ªå‡½æ•° transï¼Œå°†æ•°å­—è½¬æ¢æˆæ±‰è¯­çš„è¾“å‡ºï¼Œè¾“å…¥ä¸ºä¸è¶…è¿‡ 10000 äº¿çš„æ•°å­—ã€‚

### ç»™å‡ ä¸ªæ•°ç»„, å¯ä»¥é€šè¿‡æ•°å€¼æ‰¾åˆ°å¯¹åº”çš„æ•°ç»„åç§°

```
ç»™å‡ ä¸ªæ•°ç»„, å¯ä»¥é€šè¿‡æ•°å€¼æ‰¾åˆ°å¯¹åº”çš„æ•°ç»„åç§°
// æ¯”å¦‚è¿™ä¸ªå‡½æ•°è¾“å…¥ä¸€ä¸ª1ï¼Œé‚£ä¹ˆè¦æ±‚å‡½æ•°è¿”å›A
const A = [1,2,3];
const B = [4,5,6];
const C = [7,8,9];

function test(num) {

}
```

### è¾“å‡ºä»€ä¹ˆ? ä¸ºä»€ä¹ˆ?

```
var b = 10;
(function b(){
    b = 20;
    console.log(b);
})();
```

ä»£ç è¾“å‡ºé¢˜

```
async function async1() {
  console.log('1');
  await async2();
  console.log('2');
}

async function async2() {
  console.log('3');
}

console.log('4');

setTimeout(function() {
    console.log('5');
}, 0);

async1();

new Promise(function(resolve) {
    console.log('6');
    resolve();
  }).then(function() {
    console.log('7');
});

console.log('8');
```

###

promise é“¾å¼
ä¾‹å¦‚ promises = []ï¼Œå®ç°å¿…é¡»ä¸Šä¸€ä¸ªå¼‚æ­¥å®Œæˆåå†å»è·‘ä¸‹ä¸€ä¸ªä»»åŠ¡ã€‚æˆ‘æ˜¯å†™å‡ºä¸¤ç§æ–¹æ¡ˆï¼š
// 1.
const template = Promise.resolve();
promises.forEach((p) => {
template = template.then(p)
})
// 2. ä½¿ç”¨ await
å¤åˆ¶ä»£ç ä¸ªäººæ„Ÿè§‰å¯¹ promiseã€async/await éƒ½é—®æ¯”è¾ƒå¤šï¼ŒåŒ…æ‹¬æ¯”è¾ƒç«çš„é—®æ‰“å°é¡ºåºé‚£ç§é¢˜è¿˜æœ‰æ•è·å¼‚å¸¸çš„é—®é¢˜æˆ‘ä¹Ÿé‡åˆ°è¿‡ï¼Œåªè¦å¯¹è¯­æ³•éå¸¸ç†Ÿæ‚‰åŠ ä¸Šç¨å¾®äº†è§£å®ç°ç»†èŠ‚éƒ½æ˜¯æ²¡é—®é¢˜ã€‚

### äº‹ä»¶å§”æ‰˜

### Event Loop

JS æ‰§è¡Œæ˜¯å•çº¿ç¨‹çš„ï¼Œå®ƒæ˜¯åŸºäºäº‹ä»¶å¾ªç¯çš„ã€‚äº‹ä»¶å¾ªç¯å¤§è‡´åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š
ï¼ˆ1ï¼‰æ‰€æœ‰åŒæ­¥ä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œå½¢æˆä¸€ä¸ªæ‰§è¡Œæ ˆã€‚
ï¼ˆ2ï¼‰ä¸»çº¿ç¨‹ä¹‹å¤–ï¼Œè¿˜å­˜åœ¨ä¸€ä¸ª"ä»»åŠ¡é˜Ÿåˆ—"ã€‚åªè¦å¼‚æ­¥ä»»åŠ¡æœ‰äº†è¿è¡Œç»“æœï¼Œå°±åœ¨"ä»»åŠ¡é˜Ÿåˆ—"ä¹‹ä¸­æ”¾ç½®ä¸€ä¸ªäº‹ä»¶ã€‚
ï¼ˆ3ï¼‰ä¸€æ—¦"æ‰§è¡Œæ ˆ"ä¸­çš„æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œç³»ç»Ÿå°±ä¼šè¯»å–"ä»»åŠ¡é˜Ÿåˆ—"ï¼Œçœ‹çœ‹é‡Œé¢æœ‰å“ªäº›äº‹ä»¶ã€‚é‚£äº›å¯¹åº”çš„å¼‚æ­¥ä»»åŠ¡ï¼Œäºæ˜¯ç»“æŸç­‰å¾…çŠ¶æ€ï¼Œè¿›å…¥æ‰§è¡Œæ ˆï¼Œå¼€å§‹æ‰§è¡Œã€‚
ï¼ˆ4ï¼‰ä¸»çº¿ç¨‹ä¸æ–­é‡å¤ä¸Šé¢çš„ç¬¬ä¸‰æ­¥ã€‚
event loop åŸºæœ¬æ¯æ¬¡éƒ½ä¼šè¢«é—®åˆ°ï¼Œä¸€èˆ¬å°±æ˜¯è¯´å¾®ä»»åŠ¡ã€å®ä»»åŠ¡ï¼Œæ€ä¹ˆæ ·çš„è¿è¡Œè¿‡ç¨‹ï¼Œä»¥ä¸Šæ˜¯æ¯”è¾ƒä¹¦é¢ä¸€ç‚¹çš„å›ç­”ï¼Œæˆ‘è‡ªå·±ä¹Ÿæ²¡è®°å¾—ã€‚

### new queue().task(fn,1000).task(fn,2000).task(fn,3000).run() æ ¹æ® 1000,2000,3000 å»¶æ—¶è¾“å‡º è¡¥å…¨ queue

### [1,0,2,0,3,12]=>[1,2,3,12,0,0]æŠŠ 0 å¾€åæ’,ç„¶åé 0 æ•°å­—é¡ºåºä¸å˜,ä¸ä½¿ç”¨é¢å¤–ç©ºé—´

### ä½¿ç”¨ Promise å®ç°ä¸€ä¸ªå¼‚æ­¥æµé‡æ§åˆ¶çš„å‡½æ•°, æ¯”å¦‚ä¸€å…± 10 ä¸ªè¯·æ±‚, æ¯ä¸ªè¯·æ±‚çš„å¿«æ…¢ä¸åŒ, æœ€å¤šåŒæ—¶ 3 ä¸ªè¯·æ±‚å‘å‡º, å¿«çš„ä¸€ä¸ªè¯·æ±‚è¿”å›å, å°±ä»å‰©ä¸‹çš„ 7 ä¸ªè¯·æ±‚é‡Œå†æ‰¾ä¸€ä¸ªæ”¾è¿›è¯·æ±‚æ± é‡Œ, å¦‚æ­¤å¾ªç¯ã€‚

### ç»™ä¸€ä¸ªå­—ç¬¦ä¸², æ‰¾åˆ°ç¬¬ä¸€ä¸ªä¸é‡å¤çš„å­—ç¬¦

ababcbdsa abcdefg

```
// é¢˜ç›®éœ€æ±‚

let middleware = []
middleware.push((next) => {
    console.log(1)
    next()
    console.log(1.1)
})
middleware.push((next) => {
    console.log(2)
    next()
    console.log(2.1)
})
middleware.push((next) => {
    console.log(3)
    next()
    console.log(3.1)
})

let fn = compose(middleware)
fn()


/*
1
2
3
3.1
2.1
1.1
*/

//å®ç°composeå‡½æ•°
function compose(middlewares) {

}

```

ã€ä»£ç é¢˜ã€‘å¤§æ•°ç›¸åŠ 

è¾“å…¥ï¼šnum1 = '1234567890', num2 = '987654321'
è¾“å‡ºï¼š'2222222211'

```
//  è¿™æ˜¯ä¸€é“æ¯”è¾ƒç®€å•çš„é¢˜ç›®ï¼Œä¸»è¦å°±æ˜¯æ¨¡æ‹ŸåŠ æ³•è¿›ä½çš„å®ç°
const add = (num1, num2) => {
    const n = Math.max(num1.length, num2.length);
    //  é€†åºä¸€ä¸‹ï¼Œä»æœ€åä¸€ä½å¼€å§‹ç›¸åŠ ï¼ŒåŒæ—¶å‰é¢ä½æ•°ä¸å¤Ÿçš„è¡¥0
    const arr1 = num1.split('').reverse();
    const arr2 = num2.split('').reverse();
    const result = [];
    //  è¿›ä½çš„æ ‡è¯†ï¼Œåªæœ‰è¿›1ä½å’Œä¸è¿›ä½ä¸¤ç§æƒ…å†µ
    let temp = 0;
    for (let i = 0; i < n; i++) {
        const a = +(arr1[i] || 0);
        const b = +(arr2[i] || 0);
        let current = a + b + temp;
        if (current >= 10) {
            temp = 1;
            current -= 10;
        } else {
            temp = 0;
        }
        result.push(current);
    }
    //  è€ƒè™‘åˆ°è¿›ä½å¯¼è‡´çš„é‡çº§å¢åŠ æƒ…å†µï¼Œéœ€è¦é¢å¤–å¤„ç†
    if (temp) {
        result.push(temp);
    }
    return result.reverse().join('');
}

```

ã€ä»£ç é¢˜ã€‘å®ç°ä¸€ä¸ªåŒæ­¥çš„ sleep æ–¹æ³•
è°ƒç”¨æ–¹å¼ï¼š(new LazyLog()).log(1).sleep(1000).log(2)
è¾“å‡ºï¼šå…ˆè¾“å‡º 1ï¼Œå»¶è¿Ÿ 1 ç§’åè¾“å‡º 2

```
//  ä¸€å¼€å§‹æˆ‘çš„æƒ³æ³•æ˜¯é€šè¿‡Promiseå»å®ç°sleepï¼Œåæ¥å‘ç°Promiseçš„è¯æ— æ³•æ»¡è¶³ç›´æ¥çš„é“¾å¼è°ƒç”¨æ–¹å¼
//  é¢å®Œä¹‹åä¸‹æ¥æŸ¥äº†ä¸€ä¸‹ï¼Œå‘ç°å¯ä»¥é€šè¿‡æ­»å¾ªç¯å»å®ç°åŒæ­¥çš„sleepï¼Œä½†æ˜¯è¿™ç§æ–¹å¼å¯¹æ€§èƒ½æœ‰æå¤§çš„å½±å“
//  åœ¨æŸäº›ç¯å¢ƒä¸‹ä¼šæ‰§è¡ŒæŠ¥é”™ï¼Œåæ¥åˆå»æŸ¥äº†ä¸€ä¸‹å¼€æºçš„sleepåº“https://www.npmjs.com/package/sleep
//  å‘ç°å®ƒçš„æœ€ç»ˆä¹Ÿæ˜¯é€šè¿‡c++åŸç”Ÿä»£ç ç¼–è¯‘æˆnodeæ¨¡å—æ¥å®ç°çš„ï¼Œæ‰€ä»¥è¿™ä¸ªé—®é¢˜æœ‰æ²¡æœ‰å•¥æ›´å¥½çš„ç­”æ¡ˆå‘¢ğŸ¤”
class LazyLog {
  log(str) {
    console.log(str)
    return this;
  }

  // async sleep(delay) {
  //   await new Promise(resolve => setTimeout(() => resolve(), delay));
  //   return this;
  // }

  sleep(delay) {
    const current = Date.now();
    while (Date.now() - current < delay) {
      // ä»€ä¹ˆéƒ½ä¸åš
    }
    return this;
  }
}

```

æŒ‰ç…§ Z å­—å‹æ‰“å°çŸ©é˜µ
è¾“å…¥ï¼š[[1, 2, 3, 4], [5, 6, 7, 8], [9, 10, 11, 12], [13, 14, 15, 16]]
è¾“å‡ºï¼š1 2 5 9 6 3 4 7 10 13 14 11 8 12 15 16

```
//  è¿™ä¸ªé¢˜æˆ‘æ˜¯æ²¡æœ‰æƒ³åˆ°æ›´å¥½çš„æ€è·¯ï¼Œæ„Ÿè§‰å°±æ˜¯çº¯æš´åŠ›ç ´è§£
//  ä»å·¦ä¸Šè§’çš„ç‚¹å¼€å§‹ï¼Œå…ˆå¾€å³ä¸Šè§’èµ°ï¼Œèµ°åˆ°è¾¹ç•Œçš„æ—¶å€™å°±å¼€å§‹å¾€å·¦ä¸‹è§’èµ°ï¼Œåˆ°è¾¹ç•Œå†æ¢æ–¹å‘
//  æ ¸å¿ƒçš„ç‚¹å°±æ˜¯å¯¹äºè¾¹ç•Œçš„åˆ¤æ–­è¦å‡†ç¡®ï¼Œè¿™ä¸ªæˆ‘åœ¨é¢è¯•çš„æ—¶å€™æ²¡å†™å‡ºæ¥ï¼Œå¤ç›˜ä¹Ÿè¯•äº†å¥½ä¹…æ‰æ­£ç¡®ğŸ¤¦ğŸ»â€
const print = arr => {
  let i = 0;
  let j = 0;
  let rows = arr.length;
  let cols = arr[0].length;
  let gotoRightTop = true;
  const result = [];
  //  æœ€åä¸€å®šæ˜¯è¶…å‡ºè¡Œæˆ–è€…åˆ—äº†
  while (arr[i] && arr[i][j]) {
    result.push(arr[i][j]);

    //  å¾€å³ä¸Šè§’èµ°çš„æ—¶å€™ï¼Œåˆ—è¦åŠ 1ï¼Œè¡Œè¦å‡1
    if (gotoRightTop) {
      j++;
      //  å¦‚æœåˆ—å‡ºç•Œäº†ï¼Œè¯´æ˜è¯¥å¾€ä¸‹ç§»åŠ¨ä¸€ä¸ªå¹¶ä¸”æ›´æ¢æ–¹å‘
      if (j > cols - 1) {
        gotoRightTop = false;
        i++;
        j = cols - 1;
        continue;
      }

      i--;
      //  å¦‚æœè¡Œå‡ºç•Œäº†ï¼Œé‚£ä¹ˆéœ€è¦å›åˆ°ç•Œå†…ä¸”æ›´æ¢æ–¹å‘
      if (i < 0) {
        gotoRightTop = false;
        i = 0;
      }

    //  è¿™æ˜¯å¾€å·¦ä¸‹èµ°çš„æƒ…å†µï¼Œé€»è¾‘æ˜¯ä¸€æ ·çš„
    } else {
      i++;

      if (i > rows - 1) {
        gotoRightTop = true;
        j++;
        i = rows - 1;
        continue;
      }

      j--;
      if (j < 0) {
        gotoRightTop = true;
        j = 0;
      }
    }
  }
  return result;
}

```

å®ç°ä¸€ä¸ªå®æ—¶æœç´¢æ¡†ç»„ä»¶
const SearchBox = ({ onChange }) => {
const lockRef = useRef(0);
const [searchList, setSearchList] = useState([]);

    const onInput = async e => {
        lockRef.current += 1;
        const temp = lockRef.current;
        try {
            const res = await fetch("/api/search", e.target.value);
            //  å¤„ç†ç«æ€æ¡ä»¶
            if (lockRef.current !== temp) return;
            setSearchList(res.json());
        } catch (error) {
            console.log(error);
        }
    };

    return (
        <div className="search-wrapper">
            <input type="text" onInput={onInput} />
            <ul className="complete-list">
                {searchList.map(item => (
                    <li key={item.value} onClick={onChange(item)}>
                        {item.label}
                    </li>
                ))}
            </ul>
        </div>
    );

};

æŸ¥æ‰¾æœ‰åºæ•°ç»„ä¸­æ•°å­—æœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®
è¾“å…¥ï¼šnums = [5,7,7,8,8,10], target = 8
è¾“å‡ºï¼š4

// æœ€ç®€ç­”çš„æ–¹å¼å°±æ˜¯ç›´æ¥éå†ç„¶åæ ¹æ®æœ‰åºçš„æ¡ä»¶æ‰¾åˆ°å½“å‰å€¼ç­‰äºç›®æ ‡ä¸”ä¸‹ä¸€ä¸ªå€¼ä¸ç­‰äºç›®æ ‡çš„ç»“æœ
// å†™å‡ºæ¥ä¹‹åé¢è¯•å®˜é—®äº†æ—¶é—´å¤æ‚åº¦ï¼Œè¿™ä¸ªå°±æ˜¯å•å±‚å¾ªç¯çš„ O(N)ï¼Œæœ€åæƒ…å†µå°±æ˜¯åˆšå¥½æœ€åä¸€ä¸ªå€¼æ˜¯ç›®æ ‡å€¼
const findLast = (nums, target) => {
for (let i = 0; i < nums.length; i++) {
if (target === nums[i] && target !== nums[i + 1]) {
return i;
}
}
return -1;
};

// é—®æœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹å¼ï¼Œå°±æƒ³åˆ°äº†äºŒåˆ†æŸ¥æ‰¾ï¼Œå¯¹äºå·²ç»æœ‰åºçš„æ•°ç»„ï¼Œåªéœ€è¦é€šè¿‡åŒæŒ‡é’ˆä¸æ–­æ›´æ–°å·¦å³è¾¹ç•Œä½ç½®å°±è¡Œ
// äºŒåˆ†æ³•æœ€ä¸»è¦çš„å°±æ˜¯å¯»æ‰¾äºŒåˆ†ç»“æŸçš„è¾¹ç•Œæ¡ä»¶ï¼Œè¿™é‡Œé€‰æ‹©æ‰€æœ‰çš„æŸ¥æ‰¾æœ€åéƒ½åªå‰©ä¸¤ä¸ªå€¼
// ç„¶åå¯¹è¿™ä¸¤ä¸ªå€¼å†é¢å¤–åˆ¤æ–­ä¸€ä¸‹æ˜¯å¦ç¬¦åˆç»“æœ
// é¢è¯•å®˜ç»§ç»­è¿½é—®äºŒåˆ†æ³•çš„æ—¶é—´å¤æ‚åº¦ï¼Œè¿™ä¸ªæˆ‘æœ‰ç‚¹æ‡µï¼Œä¸è¿‡è€ƒè™‘è·Ÿé€’å½’å·®ä¸å¤šï¼Œæ‰€ä»¥å°±å›ç­”äº† O(logN)ï¼Œåº”è¯¥æ˜¯æ²¡é”™
// äºŒåˆ†æŸ¥æ‰¾æœ€åçš„æƒ…å†µæ˜¯åˆšå¥½ç¬¬ä¸€ä¸ªå€¼æˆ–è€…æœ€åä¸€ä¸ªå€¼ï¼Œæˆ–è€…ä¸­é—´å€¼æ˜¯ç›®æ ‡å€¼
const findLast2 = (nums, target) => {
let left = 0;
let right = nums.length - 1;
while (right > left + 1) {
const mid = Math.floor((left + right) / 2);
if (nums[mid] > target) {
right = mid - 1;
} else {
left = mid;
}
}
if (nums[right] === target) {
return right;
}
if (nums[left] === target) {
return left;
}
return -1;
};
